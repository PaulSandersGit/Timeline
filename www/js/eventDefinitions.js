var eventDefinitions = 
    {
        // "firstLineStartTime": "",
        "firstLineStartTimeDef": { "time": 15, "type": "bya" },
        // "firstLineEndTime": "",
        "firstLineEndTimeDef": { "time": -1, "type": "Present" },

        "zoomPoints":[
                {
                    // "time":"",
                    "timeDef": { "time": 4, "type": "bya" }
                },
                {
                    // "time":"",
                    "timeDef": { "time": 50, "type": "mya" }
                },
                {
                    // "time":"",
                    "timeDef": { "time": 4.5, "type": "mya" }
                },
                {
                    // "time":"",
                    "timeDef": { "time": 400000, "type": "ya" }
                },
                {
                    // "time":"",
                    "timeDef": { "time": 5000, "type": "ya" }
                },
                {
                    // "time":"",
                    "timeDef": { "time": 2013, "type": "" }
                }


        ],


        "events": [
    {
        "title": "Big Bang",
        "time": "",
        "timeDef": { "time": 13.7, "type": "bya" },
        "endTime": "",
        "endTimeDef": { "time":"", "type": "" },
        "maxPeriod":"",
        "description": "A dense spot of 'nothing' explodes, creating all the matter in the universe instantaneously.",
        "images": [
            { "url": "images\\\\eventImages\\TheBigBang.jpg", "citation": "nothingoutofnothing.wordpress.com" }
        ],
        "image":{"url":"","citation":""},
        "videos": [
           // { "url": "", "citation": "" } 
        ],
        "links": [
            { "url": "http://science.nasa.gov/astrophysics/focus-areas/what-powered-the-big-bang/" }
        ]
    },


      {
          "title": "The first star is formed",
          "time": "",
          "timeDef": { "time": 13.5, "type": "bya" },
          "endTime": "",
          "endTimeDef": { "time": "", "type": "" },
          "maxPeriod": "",
          "description": "Gravity acted on minute density differences in matter and gasses to form small protostars about 100th the mass of our sun. These stars slowly evolved into massive stars.",
          "images": [
              { "url": "images\\\\eventImages\\TheFirstStarisformed.jpg", "citation": "en.wikipedia.org" },
              { "url": "images\\\\eventImages\\TheFirstStarisformed1.jpg", "citation": "en.wikipedia.org" }
          ],
          "image": { "url": "", "citation": "" },
          "videos": [
              { "url": "", "citation": "" }
          ],
          "links": [
             // {"url":""} 
          ]
      },


      {
          "title": "Formation Of the Earth",
          "time": "",
          "timeDef": { "time": 4.54, "type": "bya" },
          "endTime": "",
          "endTimeDef": { "time":"", "type": "" },
          "maxPeriod": "",
          "description": "The earth forms as matter orbitting the sun collides. The heat generated from these collisions melts the rock, and the earth is initially a molten ball of lava. The inside of the earth is still molten today, 4,500 million years later, from these initial collisions.",
          "images": [
              { "url": "images\\\\eventImages\\formationOfTheEarth.jpg", "citation": "" },
          { "url": "images\\\\eventImages\\formationOfTheEarth2.jpg", "citation": "http://www.abroadintheyard.com/life-on-earth-in-2-years/" }
          ],
          "image": { "url": "", "citation": "" },
          "videos": [
              { "url": "http://www.youtube.com/embed/QDqskltCixA?feature=player_embedded", "citation": "the video citation" }
          ],
          "links": [
             // {"url":""} 
          ]
      },

      {
          "title": "Formation Of the Moon",
          "time": "",
          "timeDef": { "time": 4.4, "type": "bya" },
          "endTime": "",
          "endTimeDef": { "time": "", "type": "" },
          "maxPeriod": "",
          "description": "<p>The moon forms when a large proto-planet crashes into the Earth, creating a major explosion that sent huge amounts of rocky debris into space. Most of that material returned to Earth, but the rest stayed in space, forming a disk around the Earth that eventually grew together to form the moon, about a 1/4 the radius of earth. Recent radioactive dating suggests this occured 140 million years after earths initial formation.</p>  <p>The theory of how the moon formed is still evolving, and previous theories were that the earth formed from the same dust as the eath (doesn't explain why it's so much less dense), from the earth spinning so fast it split apart (doesn't explain the current spin and orbits), or that the moon was captured from elsewhere (but then why are it's rocks so similar to earths mantle?)",
          "images": [
        { "url": "images\\\\eventImages\\formationOfMoon.jpg", "citation": "http://news.nationalgeographic.com/news/2013/13/130710-moon-birth-impact-science-space-cover/" }
          ],
          "image": { "url": "", "citation": "" },
          "videos": [
              { "url": "http://www.youtube.com/embed/QDqskltCixA?feature=player_embedded", "citation": "the video citation" }
          ],
          "links": [
              { "url": "http://www.latimes.com/science/sciencenow/la-sci-sn-how-old-is-the-moon-20130923,0,4295431.story" }
          ]
      },
        {
            "title": "The Late Heavy Bombardment",
            "time": "",
            "timeDef": { "time": 4.1, "type": "bya" },
            "endTime": "",
            "endTimeDef": { "time": "", "type": "" },
            "maxPeriod": "",
            "description": "The Late Heavy Bombardment was an extended barrage of impact events upon the inner planets by meteoroids. The initial crust, formed as the earths surface first solidified, would have been totally distroyed during this bombardment.  Thermal flux from widespread hydrothermal activity during the LHB may have been conducive to life’s emergence",
            "images": [
                { "url": "images\\\\eventImages\\lateheavybombardment.jpg", "citation": "http://www.abroadintheyard.com/life-on-earth-in-2-years/" }
            ],
            "image": { "url": "", "citation": "" },
            "videos": [
               // { "url": "", "citation": "" } 
            ],
            "links": [
               // {"url":""} 
            ]
        },

                {
                    "title": "First oceans",
                    "time": "",
                    "timeDef": { "time": 4.0, "type": "bya" },
                    "endTime": "",
                    "endTimeDef": { "time": "", "type": "" },
                    "maxPeriod": "",
                    "description": "Water on the young earth came from two sources. Firstly, from gases released by volcanic activity, with those gases including methane, ammonia, carbon dioxide, and water vapor. Secondly, from bombardment by coments, bringing frozen water. <p>This water stayed in gaseous form until the earth cooled enough for it to condense into rain, pour onto the land, and gradually collect to become the worlds oceans</p> ",
                    "images": [
                        { "url": "images\\\\eventImages\\firstOceans.jpg", "citation": "http://www.abroadintheyard.com/life-on-earth-in-2-years/" }
                    ],
                    "image": { "url": "", "citation": "" },
                    "videos": [
                       // { "url": "", "citation": "" } 
                    ],
                    "links": [
                       // {"url":""} 
                    ]
                },

    {
        "title": "First Single Celled Life",
        "time": "",
        "timeDef": { "time": 3.8, "type": "bya" },
        "endTime": "",
        "endTimeDef": { "time": "", "type": "" },
        "maxPeriod":"",
        "description": "This is our current estimate for when the first single celled life evolved. This would have been simple, small, procaryotic cells,  which have no internal structure, e.g. no mitocondria, or nucleas. The DNA (or for the early cells, possibly RNA) would be a fre-floating loop, not broken into chromosomes. These would be chemotrophs, that would obtain carbon from carbon dioxide, and would obtain enery from the oxidization of inorganic materials. Examples today would be the simple bacteria found near hydrothermal vents.",
        "images": [
             { "url": "images\\\\eventImages\\ProcaryoticCell.jpg", "citation": "http://www.life.umd.edu/classroom/bsci124/lec15.html" },
            { "url": "images\\\\eventImages\\ProcaryoticCell2.jpg", "citation": "http://www.earthlife.net/prokaryotes/" }
        ],
        "image": { "url": "", "citation": "" },
        "videos": [
           // { "url": "", "citation": "" } 
        ],
        "links": [
           // {"url":""} 
        ]
     },

         {
             "title": "Last Common Ancestor of all Life",
             "time": "",
             "timeDef": { "time": 3.5, "type": "bya" },
             "endTime": "",
             "endTimeDef": { "time": "", "type": "" },
             "maxPeriod": "",
             "description": "This is the about the time at which Bacteria and Archaea split, and therefore the time of the last common ancestor of all life on earth today.",
             "images": [
                  { "url": "images\\\\eventImages\\LastCommonAncestor.png", "citation": "http://en.wikipedia.org/wiki/Prokaryote" }
             ],
             "image": { "url": "", "citation": "" },
             "videos": [
                // { "url": "", "citation": "" } 
             ],
             "links": [
                // {"url":""} 
             ]
         },

         {
             "title": "Photosynthesis & the Great Oxidation Event",
             "time": "",
             "timeDef": { "time": 2.4, "type": "bya" },
             "endTime": "",
             "endTimeDef": { "time": "", "type": "" },
             "maxPeriod": "",
             "description": 'Photosynthesizing cyanobcteria evolve, that produce oxygen as a waste product. Over time (a few hundred million years), this causes the "great oxidation event" where oxygen starts to build up in the atmosphere, replacing the methane. This oxygen dissolves in the oceans, and makes the iron "rust" and sink to the seafloor, forming bans of iron. <p>At this stage, the moon is much closer to the Earth than today, causing huge tides of 1,000 feet.</P>',
             "images": [
                  { "url": "images\\\\eventImages\\Photosynthesis.jpg", "citation": "http://www.environmentalgraffiti.com/ecology/mother-earth-the-beginnings-of-life/599" },
                 { "url": "images\\\\eventImages\\GreatOxidationEvent.jpg", "citation": "http://whyevolutionistrue.wordpress.com/2009/04/12/the-great-oxidation-event/" }



                
             ],
             "image": { "url": "", "citation": "" },
             "videos": [
                // { "url": "", "citation": "" } 
             ],
             "links": [
                // {"url":""} 
             ]
         },


 {
     "title": "Multicelled life appears",
     "time": "",
     "timeDef": { "time": 1, "type": "bya" },
     "endTime": "",
     "endTimeDef": { "time": "", "type": "" },
     "maxPeriod": "",
     "description": "cells single selled organisms evolve into larger creatures with with multiple cells",
     "images": [
         { "url": "images\\\\eventImages\\FirstMulticelledlife.jpg", "citation":"phys.org" }
     ],
     "image": { "url": "", "citation": "" },
     "videos": [
        // { "url": "", "citation": "" } 
     ],
     "links": [
        // {"url":""} 
     ]
 },
  

   {
       "title": "First Ice Age",
       "time": "",
       "timeDef": { "time": 850, "type": "mya" },
       "endTime": "",
       "endTimeDef": { "time": "630", "type": "mya" },
       "maxPeriod": "",
       "description": "The first ice age occurred. Opinion is divided on whether it increased or decreased biodiversity or the rate of evolution.",
       "images": [
           { "url": "images\\\\eventImages\\Ice Age.jpg", "citation": "tech.dir.groups.yahoo.com" }
       ],
       "image": { "url": "", "citation": "" },
       "videos": [
          // { "url": "", "citation": "" } 
       ],
       "links": [
          // {"url":""} 
       ]
   },


  {
      "title": "First Land Plants",
      "time": "",
      "timeDef": { "time": 475, "type": "mya" },
      "endTime": "",
      "endTimeDef": { "time": "", "type": "" },
      "maxPeriod": "",
      "description": "Complex aquatic plants take to the land. These quickly spread and soon jungles appear.",
      "images": [
          { "url": "images\\\\eventImages\\firstlandplants.jpg", "citation": "www.goldengatepalms.com" }
      ],
      "image": { "url": "", "citation": "" },
      "videos": [
         // { "url": "", "citation": "" } 
      ],
      "links": [
         // {"url":""} 
      ]
  },



    {
        "title": "Dinosaurs",
        "time": "",
        "timeDef": { "time": 250, "type": "mya" },
        "endTime": "",
        "endTimeDef": { "time": "", "type": "" },
        "maxPeriod":"",
        "description": "Big Life",
        "images": [
            { "url":"images\\\\eventImages\\dinosaurs.jpg",  "citation":"" }
        ],
        "image": { "url": "", "citation": "" },
        "videos": [
           // { "url": "", "citation": "" } 
        ],
        "links": [
           // {"url":""} 
        ]
    },


     {
         "title": "First Mammals",
         "time": "",
         "timeDef": { "time": 200, "type": "mya" },
         "endTime": "",
         "endTimeDef": { "time": "", "type": "" },
         "maxPeriod": "",
         "description": "First Mammals evolve. They where small rodent-like creatures.",
         "images": [
             { "url": "images\\\\eventImages\\FirstMammal.jpg", "citation": "pseudoplocephalus.blogspot.com" }
         ],
         "image": { "url": "", "citation": "" },
         "videos": [
            // { "url": "", "citation": "" } 
         ],
         "links": [
            // {"url":""} 
         ]
     },




    {
        "title": "Extinction of the Dinosaurs",
        "time": "",
        "timeDef": { "time": 50, "type": "mya" },
        "endTime": "",
        "endTimeDef": { "time": "", "type": "" },
        "maxPeriod": "",
        "description": "The dinosaurs become extinct",
        "images": [
            { "url": "images\\\\eventImages\\dinosaurs.jpg", "citation": "" }
        ],
        "image": { "url": "", "citation": "" },
        "videos": [
           // { "url": "", "citation": "" } 
        ],
        "links": [
           // {"url":""} 
        ]
    },

        {
            "title": "Emergence of the genus Homo",
            "time": "",
            "timeDef": { "time": 2, "type": "mya" },
            "endTime": "",
            "endTimeDef": { "time": "", "type": "" },
            "maxPeriod": "",
            "description": "First members of the genus Homo appear in the fossil record. These are our first ancestors.",
            "images": [
                { "url": "images\\\\eventImages\\dinosaurs.jpg", "citation": "" }
            ],
            "image": { "url": "", "citation": "" },
            "videos": [
               // { "url": "", "citation": "" } 
            ],
            "links": [
               // {"url":""} 
            ]
        },

     {
         "title": "Evolution of Neandrathals",
         "time": "",
         "timeDef": { "time": 350000 , "type": "ya" },
         "endTime": "",
         "endTimeDef": { "time": "", "type": "" },
         "maxPeriod": "",
         "description": "A humanoid species evolves, but is less successful then the genus Homo and eventually goes extinct.",
         "images": [
             { "url": "images\\\\eventImages\\dinosaurs.jpg", "citation": "" }
         ],
         "image": { "url": "", "citation": "" },
         "videos": [
            // { "url": "", "citation": "" } 
         ],
         "links": [
            // {"url":""} 
         ]
     },

     {
         "title": "Great Pyramid of Giza",
         "time": "",
         "timeDef": { "time": 2560, "type": "BC" },
         "endTime": "",
         "endTimeDef": { "time": "", "type": "" },
         "maxPeriod": "",
         "description": "The Great Pyramid of Giza is the oldest of the Seven Wonders of the Ancient World, and the only one still largly intact. <P>It is the tallest and oldest of the three pyramids at Giza. It is now believed that it was built by tens of thousands of skilled workers rather than slaves. When it was first built, it was covered with polished casing stones (some still in place at the base, as seen in the second image), and hence would have had smooth, gleaming sides. It took about 20 years to complete, using 2.3 million blocks, weighing an average of 2.5 tons each (meaning moving an average of 13 of the blocks into place each hour, day and night).</P> <P>The pyramid remained the tallest man-made structure in the world for over 3,800 years</P>",
         "images": [
             { "url": "images\\\\eventImages\\PyramidsOfGiza.jpg", "citation": "http://subharanjangupta.files.wordpress.com/2011/07/pyramids_of_giza.jpg" },
             { "url": "images\\\\eventImages\\PyramidsOfGiza2.jpg", "citation": "http://bibliotecapleyades.lege.net/piramides/images/sourcebook007.jpg" },
         ],
         "image": { "url": "", "citation": "" },
         "videos": [
            // { "url": "", "citation": "" } 
         ],
         "links": [
            // {"url":""} 
         ]
     },


       {
           "title": "Pythagoras",
           "time": "",
           "timeDef": { "time": 570, "type": "BC" },
           "endTime": "",
           "endTimeDef": { "time": 495, "type": "BC" },
           "maxPeriod": "",
           "description": "Most famous for the Pythagoream Theorem, that for a right angled triangle of sides a, b, c, then a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup>. Whilst it is argued by some that the theorem was known earlier, the proof attributed to Pythagorous is particularly simple, based on rearranging the four triangles of side a,b,c inside a square. The area of the outer square, and the four triangles, is unchanged, so the black regions in the two cases must also be equal.",
           "images": [
               { "url": "images\\\\eventImages\\Pythag_anim.gif", "citation": "http://en.wikipedia.org/wiki/File:Pythag_anim.gif" }
           ],
           "image": { "url": "", "citation": "" },
           "videos": [
              // { "url": "", "citation": "" } 
           ],
           "links": [
              // {"url":""} 
           ]
       },

       {
           "title": "Parthenon Completed",
           "time": "",
           "timeDef": { "time": 438, "type": "BC" },
           "endTime": "",
           "endTimeDef": { "time": "", "type": "" },
           "maxPeriod": "",
           "description": "The temple to Athena on the Acropolis is completed after nine years, when the Athenian Empire was at the height of its power. It is built on the site of a previous temple, destroyed during construction when the Persians sacked Athens in 480 BC. Like many Greek temples it was used as a treasury. Unfortunately, it was also used as an ammunitation dump during the period of Ottoman rule, and was fired on by the Venetians attacking the acropolis in 1687, causing huge damage.",
           "images": [
               { "url": "images\\\\eventImages\\Parthenon.jpg", "citation": "http://en.wikipedia.org/wiki/File:The_Parthenon_in_Athens.jpg" }
           ],
           "image": { "url": "", "citation": "" },
           "videos": [
              // { "url": "", "citation": "" } 
           ],
           "links": [
              // {"url":""} 
           ]
       },

       {
           "title": "Colosseum Completed",
           "time": "",
           "timeDef": { "time": 73, "type": "" },
           "endTime": "",
           "endTimeDef": { "time": "", "type": "" },
           "maxPeriod": "",
           "description": "The roman emperor Vespasian decided to demolish the place of nero to increase public popularity of the flavian family and in it's place build a center for gladiators and other entertainment for the roman people. It was paid for by the recent roman victory in Jerusalem, and was built by over 100,000 prisoners from the Jewish war. Emperor Demetian later added the network of tunnels and cells underneath the colloseum.",
           "images": [
               { "url": "images\\\\eventImages\\Colosseum.jpg", "citation": "http://en.wikipedia.org/wiki/File:Colosseum_2007.jpg" }
           ],
           "image": { "url": "", "citation": "" },
           "videos": [
              // { "url": "", "citation": "" } 
           ],
           "links": [
              // {"url":""} 
           ]
       },


    {
        "title": "First Man on the Moon",
        "time": "",
        "timeDef": { "time": 1969, "type": "" },
        "endTime": "",
        "endTimeDef": { "time": "", "type": "" },
        "maxPeriod": "",
        "description": "One small step",
        "images": [
            { "url": "images\\\\eventImages\\Moon Landing.jpg", "citation": "" }
        ],
        "image": { "url": "", "citation": "" },
        "videos": [
           // { "url": "", "citation": "" } 
        ],
        "links": [
           // {"url":""} 
        ]
    }



        ]
    };


var events ;

/* Initialise the events definitions  */
function initEvents()
    {
     events = eventDefinitions.events;

    /* For each event set the image to simply be the first in the list, and set the times */
    for (var i = 0 ; i < events.length; i++) {
        var event = events[i];

        if (event.images.length > 0) {
            event.image.url = event.images[0].url;
            event.image.citation = event.images[0].citation;
        }

        
        event.time = getTimeFromTimeDef(event.timeDef.time,event.timeDef.type)  ;
    }


    /* Handle times of first line and each zoom point */
    eventDefinitions.firstLineStartTime = getTimeFromTimeDef(eventDefinitions.firstLineStartTimeDef.time, eventDefinitions.firstLineStartTimeDef.type);
    eventDefinitions.firstLineEndTime = getTimeFromTimeDef(eventDefinitions.firstLineEndTimeDef.time, eventDefinitions.firstLineEndTimeDef.type);
 
    for (var i = 0 ; i < eventDefinitions.zoomPoints.length; i++) {
        var zoomPoint = eventDefinitions.zoomPoints[i];
        zoomPoint.time = getTimeFromTimeDef(zoomPoint.timeDef.time, zoomPoint.timeDef.type);
    }

}

/* Convert a timeDef to a Time  */
function getTimeFromTimeDef(timeDefTime,timeDefType) {
    var time 


        if (timeDefType == "bya") {
            time = timeDefTime * -1000000000;
        }
        if (timeDefType == "mya") {
            time = timeDefTime * -1000000;
        }
        if (timeDefType == "ya") {
            time = timeDefTime * -1 + getCurrentYear();
        }
        if (timeDefType == "BC") {
            time = timeDefTime * -1;
        }
        if (timeDefType == "AD" || timeDefType == "") {
            time = timeDefTime ;
        }
        if (timeDefType == "Present") {
            time = getCurrentYear();
        }
        return time;




}

/* Get the current Year  */
function getCurrentYear() {

    var year // = new Date().getYear();

    year = 2013;

    return year;

}



